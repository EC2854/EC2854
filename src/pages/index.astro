---
import Layout from '../layouts/Layout.astro';
import Window from '../components/Window.astro';

function loadModules(glob) {
    return Object.entries(glob).map(([path, mod]) => {
        const metadata = mod.metadata ?? {};
        return {
            id: metadata.id ?? 'unknown',
            name: metadata.name ?? 'Unnamed',
            Component: mod.default,
        };
    });
}
const utils = loadModules(import.meta.glob('../components/*/*.astro', { eager: true }));
---

<Layout>
    {utils.map(({ id, name, Component }) => (
        <Window id={id} name={name}>
            <Component/>
        </Window>
    ))}
</Layout>
